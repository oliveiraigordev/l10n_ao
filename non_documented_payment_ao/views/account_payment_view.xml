<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_account_payment_inherit" model="ir.ui.view">
        <field name="name">account.payment.inherit</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='group1']" position="replace">
                <group name="group1">
                    <field name="is_account" invisible='1'/>
                    <field name="is_internal_transfer" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="payment_type" widget="radio" options="{'horizontal': True}" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="partner_id" context="{'default_is_company': True}" string="Cliente" options="{'no_quick_create': True}" attrs="{'readonly':[('state', '!=', 'draft')],'invisible':['|','|', ('partner_type','!=','customer'), ('is_internal_transfer', '=', True), ('is_account', '=', True)]}"/>
                    <field name="partner_id" context="{'default_is_company': True}" string="Vendedor" options="{'no_quick_create': True}" attrs="{'readonly':[('state', '!=', 'draft')],                                                'invisible':['|','|', ('partner_type','!=','supplier'), ('is_internal_transfer', '=', True), ('is_account', '=', True)]}"/>
                    <field name="account_id" attrs="{'invisible':[('is_account', '=', False)],'readonly':[('state','!=','draft')]}"/>
                    <field name="destination_account_id" invisible='1'/>
                    <label for="amount"/>
                    <div name="amount_div" class="o_row">
                        <field name="amount" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="currency_id" options="{'no_create': True, 'no_open': True}" required="1" attrs="{'readonly': [('state', '!=', 'draft')]}" groups="base.group_multi_currency"/>
                    </div>
                    <field name="date" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="ref" string="Memo"/>
                </group>
            </xpath>       
        </field>
    </record>

    <!-- Menu de pagamento do cliente -->
    <record id="action_payment_customer_ao" model="ir.actions.act_window">
        <field name="name">Pagamento de receitas directa</field>
        <field name="res_model">account.payment</field>
        <field name="domain">[('is_account', '=', 'True')]</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{
            'default_is_account': 'True',
            'default_payment_type': 'inbound',
            'default_partner_type': 'customer',
            'search_default_inbound_filter': 1,
            'default_move_journal_types': ('bank', 'cash'),
            }
        </field>
    </record>

    <menuitem id="menu_payment_customer_ao" name="Pagamento de receitas directa" parent="account.menu_finance_receivables" action="action_payment_customer_ao"/>

    <!-- Menu de pagamento do fornecedor -->
    <record id="action_payment_supplier_ao" model="ir.actions.act_window">
        <field name="name">Pagamentos de custos directos</field>
        <field name="res_model">account.payment</field>
        <field name="domain">[('is_account', '=', 'True')]</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{
            'default_is_account': 'True',
            'default_payment_type': 'outbound',
            'default_partner_type': 'supplier',
            'search_default_outbound_filter': 1,
            'default_move_journal_types': ('bank', 'cash'),
            }
        </field>
    </record>

    <menuitem id="menu_payment_supplier_ao" name="Pagamentos de custos directos" parent="account.menu_finance_payables" action="action_payment_supplier_ao"/>
</odoo>