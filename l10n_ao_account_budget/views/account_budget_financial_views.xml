<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.ui.view" id="view_financial_budget_tree">
        <field name="name">view.financial.budget.tree</field>
        <field name="model">account.budget.lines</field>
        <field name="arch" type="xml">
            <tree default_order="account_code asc" js_class="l10n_ao_account_budget_list" create="0" edit="false" expand="True" multi_edit="0">
                <field name="budget_line_type" invisible="1"/>
                <field name="account_id"/>
                <field name="january"/>
                <field name="january_accomplished"/>
                <field name="january_variance" widget="percentage"/>
                <field name="february"/>
                <field name="february_accomplished"/>
                <field name="february_variance" widget="percentage"/>
                <field name="march"/>
                <field name="march_accomplished"/>
                <field name="march_variance" widget="percentage"/>
                <field name="april"/>
                <field name="april_accomplished"/>
                <field name="april_variance" widget="percentage"/>
                <field name="may"/>
                <field name="may_accomplished"/>
                <field name="may_variance" widget="percentage"/>
                <field name="june"/>
                <field name="june_accomplished"/>
                <field name="june_variance" widget="percentage"/>
                <field name="july"/>
                <field name="july_accomplished"/>
                <field name="july_variance" widget="percentage"/>
                <field name="august"/>
                <field name="august_accomplished"/>
                <field name="august_variance" widget="percentage"/>
                <field name="september"/>
                <field name="september_accomplished"/>
                <field name="september_variance" widget="percentage"/>
                <field name="october"/>
                <field name="october_accomplished"/>
                <field name="october_variance" widget="percentage"/>
                <field name="november"/>
                <field name="november_accomplished"/>
                <field name="november_variance" widget="percentage"/>
                <field name="december"/>
                <field name="december_accomplished"/>
                <field name="december_variance" widget="percentage"/>

                <field name="total"/>
                <field name="total_accomplished"/>
                <field name="total_variance" widget="percentage"/>
            </tree>
        </field>
    </record>

    <record id="view_financial_budget_filter" model="ir.ui.view">
        <field name="name">account.budget.lines.filter.financial</field>
        <field name="model">account.budget.lines</field>
        <field name="arch" type="xml">
            <search string="Search Budget">
                <field name="account_id"/>
                <group expand="0" string="Group By">
                    <filter name="budget_line_type_by" string="Entrada ou Saída" context="{'group_by':'budget_line_type'}"/>
                    <filter name="account_budget_line_group_id_by" string="Categória" context="{'group_by':'account_budget_line_group_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <record model="ir.actions.act_window" id="act_financial_budget">
        <field name="name">Análise Orçamento Financeiro</field>
        <field name="res_model">account.budget.lines</field>
        <field name="view_mode">tree</field>
        <field name="domain">[("budget_type", "=", "financial")]</field>
        <field name="view_id" eval="view_financial_budget_tree"/>
        <field name="search_view_id" ref="view_financial_budget_filter"/>
    </record>
</odoo> 